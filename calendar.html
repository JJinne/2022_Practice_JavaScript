<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>HowToDo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="calnedar.css">
  </head>
<body>
  <div class="row" >
    <div class="col" id="calendar">
      <div class="calendar">
        <div class="header">
            <div class="year" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"></div>
            <button class="calendar_btn"> <i class="bi bi-arrow-left-circle-fill"></i></button>
            <div class = "title"> <span class="month" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"></span></div>      
            <button class="calendar_btn"> <i class="bi bi-arrow-right-circle-fill"></i></button>
        </div>
        <div class="day">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Web</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>
        <div class="dates"></div>
      </div>
   </div>
   <div class="col-3"  id="accordionFlush" style ="display: none;"  >
      <div class="accordion accordion-flush" >
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingOne">
            <button class="accordion-button collapsed" style="background-color: #a485ee44;" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
            </button>
          </h2>
          <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne">
            <div class="accordion-body">
              <p><i class="bi bi-plus-square"></i></p>
              <ul class="list-group">
                <li class="list-group-item">
                  <input class="form-check-input me-1" type="checkbox" value="" id="firstCheckboxStretched">
                  <label class="form-check-label stretched-link" for="firstCheckboxStretched">First checkbox</label>
                </li>
                <li class="list-group-item">
                  <input class="form-check-input me-1" type="checkbox" value="" id="secondCheckboxStretched">
                  <label class="form-check-label stretched-link" for="secondCheckboxStretched">Second checkbox</label>
                </li>
                <li class="list-group-item">
                  <input class="form-check-input me-1" type="checkbox" value="" id="thirdCheckboxStretched">
                  <label class="form-check-label stretched-link" for="thirdCheckboxStretched">Third checkbox</label>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingTwo">
            <button class="accordion-button collapsed" style="background-color: #a485ee44;" type="button"  data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
              Today's
            </button>
          </h2>
          <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo">
            <div class="accordion-body">
                <div class="row">
                  <!--하루 시간 테이블-->
                  <div class="col-4">
                    <div id="list-example" class="list-group">
                      <a class="list-group-item list-group-item-action" id="scheduleTime" href="#list-item-1">09:00-18:00 </a>
                      <a class="list-group-item list-group-item-action" id="scheduleTime" href="#list-item-2">18:00-19:30 </a>
                      <a class="list-group-item list-group-item-action" id="scheduleTime" href="#list-item-3">19:30-20:00 </a>
                    </div>
                  </div>
                  <!--시간 별 스케줄-->
                  <div class="col-8">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">An item</li>
                      <li class="list-group-item">A second item</li>
                      <li class="list-group-item">A third item</li>

                    </ul>
                  </div>
                </div>

            </div>
          </div>
        </div>
      </div>
   </div>
</div>
<!-- 년도, 월 클릭 시 event offcanvas -->
<div class = "row" >
  <div class = "col">
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"  data-bs-backdrop="false" aria-labelledby="offcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <p ></p>
        <ul class="list-group">
          <li class="list-group-item">
            <input class="form-check-input me-1" type="checkbox" value="" id="firstCheckboxStretched">
            <label class="form-check-label stretched-link" for="firstCheckboxStretched"></label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-1" type="checkbox" value="" id="secondCheckboxStretched">
            <label class="form-check-label stretched-link" for="secondCheckboxStretched"></label>
          </li>
          <li class="list-group-item">
            <input class="form-check-input me-1" type="checkbox" value="" id="thirdCheckboxStretched">
            <label class="form-check-label stretched-link" for="thirdCheckboxStretched"></label>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>   
  <script type="text/javascript">

      
    var CDate = new Date();  //today의 Date 를 세어주는 역할
    var today = new Date(); 
    var selectCk = 0;
    
    var buildcalendar = function(){
      var htmlDates = ''; 
      var prevLast = new Date(CDate.getFullYear(), CDate.getMonth(), 0); //지난 달의 마지막 날 
      var thisFirst = new Date(CDate.getFullYear(), CDate.getMonth(), 1); //이번 달의 첫쨰 날
      var thisLast = new Date(CDate.getFullYear(), CDate.getMonth() + 1, 0); //이번 달의 마지막 날
      document.querySelector(".year").innerHTML = CDate.getFullYear() + "년";  // year에 년도 출력
      document.querySelector(".month").innerHTML = (CDate.getMonth() + 1) + "월";  //month에 월 출력
      const dates = []; 
      if(thisFirst.getDay()!=0){ 
        for(var i = 0; i < thisFirst.getDay(); i++){
          dates.unshift(prevLast.getDate()-i); // 지난 달 날짜 채우기
        } 
      } 
      for(var i = 1; i <= thisLast.getDate(); i++){
            dates.push(i); // 이번 달 날짜 채우기 
      } 
      for(var i = 1; i <= 13 - thisLast.getDay(); i++){ 
            dates.push(i); // 다음 달 날짜 채우기 (나머지 다 채운 다음 출력할 때 42개만 출력함)
      } 
      
      for(var i = 0; i < 42; i++){
        if(i < thisFirst.getDay()){
          htmlDates += '<div class="date last">'+dates[i]+'</div>'; 
        }else if(today.getDate()==dates[i] && today.getMonth()==CDate.getMonth() && today.getFullYear()==CDate.getFullYear()){
            htmlDates += '<div id="date_'+dates[i]+'" class="date today" onclick="fn_selectDate('+dates[i]+');">'+dates[i]+'</div>'; 
        }else if(i >= thisFirst.getDay() + thisLast.getDate()){
            htmlDates += '<div class="date next">'+dates[i]+'</div>'; 
        }else{
          htmlDates += '<div id="date_'+dates[i]+'" class="date" onclick="fn_selectDate('+dates[i]+');">'+dates[i]+'</div>'; 
        }
        } 
    document.querySelector(".dates").innerHTML = htmlDates; 
    } 
 
    // function fn_click(n){
    //     const memo = document.querySelector(".memo");
    //     memo.textContent = '';
    //     switch(n){
    //         case 1:
    //             memo.textContent = year.innerHTML +  ' 올해 목표'; 
    //              break;
    //         case 2:
    //             memo.textContent = month.innerHTML + '일 하루 스케줄러';
    //              break;
    //         case 3:
    //             memo.textContent = selectCk + '일 하루 스케줄러';
    //             break;
    //     }
 
    // }
    const title = document.querySelector(".offcanvas-title");
    const year = document.querySelector('.year');
    year.addEventListener('click', function (){
      title.textContent = year.innerHTML +  ' 올해 년간 목표'; 
        
    });

    const month = document.querySelector('.month');  
    month.addEventListener('click', function (){
      title.textContent = month.innerHTML + '의 월간 목표';
    });

    
 
    const prevMonth= document.querySelectorAll('.calendar_btn')[0];
    prevMonth.addEventListener('click',prevCal);
    function prevCal(){
        CDate.setMonth(CDate.getMonth()-1); 
        buildcalendar(); 
    } 

    const nextMonth= document.querySelectorAll('.calendar_btn')[1];
    nextMonth.addEventListener('click',nextCal);
    function nextCal(){
        CDate.setMonth(CDate.getMonth()+1);
        buildcalendar(); 
    }
    
    function fn_selectDate(date){
      
      var year = CDate.getFullYear();
      var month = CDate.getMonth() + 1;
      var date_txt = "";
      if(CDate.getMonth + 1 < 10){
        month = "0" + (CDate.getMonth() + 1);
      }
        $(".date").css("background-color", "");
        $(".date").css("color", "");
        $("#date_"+date).css("background-color", "#c6b2f544");
        $("#date_"+date).css("color", "");
        
        $("#period_1").val(year+"-"+month+"-"+date);
        $("#period_2").val("");
        selectCk = date;
        const accordionFlush = document.querySelector('#accordionFlush');
        if(accordionFlush.style.display =='none'){
          accordionFlush.style.display = 'block';
        }else{
          accordionFlush.style.display = 'none';
        }

    }

    
    buildcalendar();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
